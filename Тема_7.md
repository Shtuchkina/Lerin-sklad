# Тема 7. Раюота с файлами (ввод, вывод).
Отчет по Теме #7 выполнила:
- Штукина Валерия Сергеевна
- АИС-22-1

| Задание | Лаб_раб | Сам_раб |
| ------ | ------ | ------ |
| Задание 1 | + | + |
| Задание 2 | + | + |
| Задание 3 | + | + |
| Задание 4 | + | + |
| Задание 5 | + | + |
| Задание 6 | + | - |
| Задание 7 | + | - |
| Задание 8 | + | - |
| Задание 9 | + | - |
| Задание 10 | + | - |


знак "+" - задание выполнено; знак "-" - задание не выполнено;

Работу проверили:
- к.э.н., доцент Панов М.А.

## Лабораторная работа №7
### Задание 1. Составьте текстовый файл и положите его в одну директорию с программой на Python. Текстовый файл должен состоять минимум из двух строк.


### Результат.
![Меню](https://github.com/Shtuchkina/Lerin-sklad/blob/%D0%A2%D0%B5%D0%BC%D0%B0_7/%D0%A2%D0%B5%D0%BC%D0%B0%207/Screenshot%202024-10-22%20153034.png?raw=true)



### Задание 2. Напишите программу, которая выведет только первую строку из вашего файла, при этом используйте конструкцию open()/close().



```python
f = open('kilka', 'r')
print(f.readline())
f.close
```

### Результат.
![Меню](https://github.com/Shtuchkina/Lerin-sklad/blob/%D0%A2%D0%B5%D0%BC%D0%B0_7/%D0%A2%D0%B5%D0%BC%D0%B0%207/Screenshot%202024-10-22%20194251.png?raw=true)

### Выводы

1. Функция `open()` используется для открытия файла в режиме чтения `r`.
2. Метод `readline()` читает одну строку из файла.

### Задание 3. Напишите программу, которая выведет все строки из вашего файла в массиве, при этом используйте конструкцию open()/close().
```python
f = open('kilka', 'r')
print(f.readlines())
f.close()
```
### Результат.
![Меню](https://github.com/Shtuchkina/Lerin-sklad/blob/%D0%A2%D0%B5%D0%BC%D0%B0_7/%D0%A2%D0%B5%D0%BC%D0%B0%207/Screenshot%202024-10-22%20194642.png?raw=true)

### Выводы
Файл закрывается явно с помощью `f.close()`.


### Задание 4. Напишите программу, которая выведет все строки из вашего файла в массиве, при этом используйте конструкцию with open().



```python
with open('kilka') as f:
    print(f.readlines())
```
### Результат.
![Меню](https://github.com/Shtuchkina/Lerin-sklad/blob/%D0%A2%D0%B5%D0%BC%D0%B0_7/%D0%A2%D0%B5%D0%BC%D0%B0%207/Screenshot%202024-10-22%20194953.png?raw=true)
### Выводы
1. Для больших файлов лучше использовать цикл `for line in f`: вместо `f.readlines()`, чтобы избежать загрузки всей памяти.


### Задание 5. Напишите программу, которая выведет каждую строку из вашего файла отдельно, при этом используйте конструкцию with open().




```python
with open('kilka') as f:
    for line in f:
        print(line)
```
### Результат.
![Меню](https://github.com/Shtuchkina/Lerin-sklad/blob/%D0%A2%D0%B5%D0%BC%D0%B0_7/%D0%A2%D0%B5%D0%BC%D0%B0%207/Screenshot%202024-10-22%20195114.png?raw=true)
### Выводы

1. Каждая строка выводится отдельно.



### Задание 6. Напишите программу, которая будет добавлять новую строку в ваш файл, а потом выведет полученный файл в консоль. Вывод можно осуществлять любым способом.




```python
with open('kilka', 'a+') as f:
    f.write('\nЛюбите кофе!')
with open ('kilka', 'r') as f:
    result = f.readlines()
    print(result)
```
### Результат.
![Меню](https://github.com/Shtuchkina/Lerin-sklad/blob/%D0%A2%D0%B5%D0%BC%D0%B0_7/%D0%A2%D0%B5%D0%BC%D0%B0%207/Screenshot%202024-10-22%20195909.png?raw=true)

### Выводы

1. Использование режима `a+` позволяет добавлять новое содержимое в конец файла без потери существующего.


### Задание 7. Напишите программу, которая перепишет всю информацию, которая была у вас в файле до этого, например напишет любые данные из произвольно вами составленного списка.




```python
with open('kilka', 'a+') as f:
    f.write('\nЛюбите кофе')
with open('kilka', 'r') as f:
    result = f.readlines()
    print(result)
```
### Результат.
![Меню](https://github.com/Shtuchkina/Lerin-sklad/blob/%D0%A2%D0%B5%D0%BC%D0%B0_7/%D0%A2%D0%B5%D0%BC%D0%B0%207/Screenshot%202024-10-23%20003637.png?raw=true)

![Меню](https://github.com/Shtuchkina/Lerin-sklad/blob/%D0%A2%D0%B5%D0%BC%D0%B0_7/%D0%A2%D0%B5%D0%BC%D0%B0%207/Screenshot%202024-10-23%20003714.png?raw=true)

### Выводы

1. Используется режим `'r' (read)` для чтения содержимого файла.
2. Все строки файла читаются и сохраняются в списке `result`.



### Задание 8. Выберите любую папку на своем компьютере, имеющую вложенные директории. Выведите на печать в терминал ее содержимое, как и всех подкаталогов при помощи функции print_docs(directory).



```python
import os

def print_docks(directory):
    all_files = os.walk(directory)
    for catalog in all_files:
        print(f'Папка {catalog[0]} содержит: ')
    print(f'Директории: {", ".join([folder for folder in catalog[1]])}')
    print(f'Файлы: {", ".join([file for file in catalog[2]])}')
    print('-' * 40)

print_docks('/lab_1/.venv')
```
### Результат.
![Меню](https://github.com/Shtuchkina/Lerin-sklad/blob/%D0%A2%D0%B5%D0%BC%D0%B0_7/%D0%A2%D0%B5%D0%BC%D0%B0%207/Screenshot%202024-10-23%20005021.png?raw=true)

### Выводы

1. Использование `os.walk()` для обхода директорий рекурсивно.



### Задание 9. Требуется реализовать функцию, которая выводит слово, имеющее максимальную длину (или список слов, если таковых несколько). Проверьте работоспособность программы на своем наборе данных



```python
def longest_words(file):
    with open(file, encoding = 'utf-8') as f:
        words = f.read().split()
        max_length = len(max(words, key = len))
        for word in words:
            if len(word) == max_length:
                sought_words = word
        if len(sought_words) == 1:
            return sought_words[0]
        return sought_words
print(longest_words('kilka'))
```
### Результат.
![Меню](https://github.com/Shtuchkina/Lerin-sklad/blob/%D0%A2%D0%B5%D0%BC%D0%B0_7/%D0%A2%D0%B5%D0%BC%D0%B0%207/Screenshot%202024-10-23%20010334.png?raw=true)

### Выводы

1. Поиск максимальной длины слова с помощью `max()` и ключевого аргумента `len`.



### Задание 10. Требуется создать csv-файл «rows_300.csv» со следующими столбцами:
### • № - номер по порядку (от 1 до 300);
### • Секунда – текущая секунда на вашем ПК;
### • Микросекунда – текущая миллисекунда на часах.



```python
import csv
import datetime
import time

with open('rows_300.csv', 'w', encoding='utf-8', newline='') as f:
    writer = csv.writer(f)
    writer.writerow(['№', 'Секунда', 'Микросекунда'])
    for line in range(1, 301):
        writer.writerow([line, datetime.datetime.now().second,
                         datetime.datetime.now().microsecond])
        time.sleep(0.01)
```
### Результат.
![Меню](https://github.com/Shtuchkina/Lerin-sklad/blob/%D0%A2%D0%B5%D0%BC%D0%B0_7/%D0%A2%D0%B5%D0%BC%D0%B0%207/Screenshot%202024-10-23%20011105.png?raw=true)

### Выводы

1. Использование модуля `csv` для работы с CSV-файлами.
2. Использование `datetime.datetime.now().second` для получения текущего секунда.
3. Использование `datetime.datetime.now().microsecond` для получения текущих микросекунд.



## Самостоятельная работа №7

### Задание 1. Найдите в интернете любую статью (объем статьи не менее 200 слов), скопируйте ее содержимое в файл и напишите программу, которая считает количество слов в текстовом файле и определит самое часто встречающееся слово. 
### Результатом выполнения задачи будет: скриншот файла со статьей, листинг кода, и вывод в консоль, в котором будет указана вся необходимая информация.


```python
def count_words_and_most_common(kilka):
    try:
        with open('kilka', 'r', encoding='utf-8') as file:
            text = file.read()
            words = text.split()
            print(f"В текстовом файле {len(words)} слов.")

            word_count = {}
            for word in words:
                if word in word_count:
                    word_count[word] += 1
                else:
                    word_count[word] = 1

            most_common_word = max(word_count, key=word_count.get)
            print(f"Самое популярное слово это: '{most_common_word}' встречается {word_count[most_common_word]} раз.")
    except FileNotFoundError:
        print("File not found.")

count_words_and_most_common('mer.txt')
```
### Результат.
![Меню](https://github.com/Shtuchkina/Lerin-sklad/blob/%D0%A2%D0%B5%D0%BC%D0%B0_7/%D0%A2%D0%B5%D0%BC%D0%B0%207/Screenshot%202024-10-23%20011510.png?raw=true)

![Меню](https://github.com/Shtuchkina/Lerin-sklad/blob/%D0%A2%D0%B5%D0%BC%D0%B0_7/%D0%A2%D0%B5%D0%BC%D0%B0%207/Screenshot%202024-10-23%20011859.png?raw=true)

### Выводы

1. Нахождение самого часто встречающегося слова с помощью `max()` и ключевого аргумента `word_count.get`.


### Задание 2. У вас появилась потребность в ведении книги расходов, посмотрев все существующие варианты вы пришли к выводу что вас ничего не устраивает и нужно все делать самому. Напишите программу для учета расходов. Программа должна позволять вводить информацию о расходах, сохранять ее в файл и выводить существующие данные в консоль. Ввод информации происходит через консоль. 
### Результатом выполнения задачи будет: скриншот файла с учетом расходов, листинг кода, и вывод в консоль, с демонстрацией работоспособности программы.


```python
transport = int(input("Введите затраты на проезд: "))
food = int(input("Введите затраты на питание: "))
house = int(input("Введите затраты на квартиру: "))
total = transport + food + house

with open("tutu.txt", "w") as file:
    file.write(f"Итого:\n"
      f"Метро: {transport} р.\n"
      f"Еда: {food} р.\n"
      f"Квартира: {house} р.\n"
      f"Всего: {total} р.")

print(f"Итого:\n"
      f"Метро: {transport} р.\n"
      f"Еда: {food} р.\n"
      f"Квартира: {house} р.\n"
      f"Всего: {total} р.")
```
### Результат.
![Меню](https://github.com/Shtuchkina/Lerin-sklad/blob/%D0%A2%D0%B5%D0%BC%D0%B0_7/%D0%A2%D0%B5%D0%BC%D0%B0%207/Screenshot%202024-10-23%20012224.png?raw=true)

### Выводы
1. Ввод трех типов расходов через `input()`.
2. Конвертация введенных данных в целые числа с помощью `int()`.



### Задание 3. Имеется файл input.txt с текстом на латинице. Напишите программу, которая выводит следующую статистику по тексту: количество букв латинского алфавита; число слов; число строк.



```python
import re
with open("pupu.txt", "w") as file:
    file.write(f"Beautiful is better than ugly. \n"
      f"Explicit is better than implicit. \n"
      f"Simple is better than complex. \n"
      f"Complex is better than complicated.")

with open("pupu.txt", "r") as file:
    lines = len(file.readlines())

with open("pupu.txt", "r") as file:
    content1 = file.read().replace('\n', '')
    words = len(re.sub(r'[^\w\s]', '', content1).split(" "))

with open("pupu.txt", "r") as file:
    content2 = file.read().replace('\n', '')
    content2 = content2.replace(' ', '')
    letters = re.sub(r'[^\w\s]', '', content2)
    letters = len(list(letters))

print(f"Input file contains:\n"
      f"{letters} letters\n"
      f"{words} words\n"
      f"{lines} lines")
```
### Результат.
![Меню](https://github.com/Shtuchkina/Lerin-sklad/blob/%D0%A2%D0%B5%D0%BC%D0%B0_7/%D0%A2%D0%B5%D0%BC%D0%B0%207/Screenshot%202024-10-23%20012656.png?raw=true)

### Выводы
1. Чтение содержимого файла дважды: первично для подсчета строк, вторично для анализа слов и букв.



### Задание 4. Напишите программу, которая получает на вход предложение, выводит его в терминал, заменяя все запрещенные слова звездочками * (количество звездочек равно количеству букв в слове). Запрещенные слова, разделенные символом пробела, хранятся в текстовом файле input.txt. Все слова в этом файле записаны в нижнем регистре. Программа должна заменить запрещенные слова, где бы они ни встречались, даже в середине другого слова. Замена производится независимо от регистра: если файл input.txt содержит запрещенное слово exam, то слова exam, Exam, ExaM, EXAM и exAm должны быть заменены на ****.



```python
x = input("Введите предложение: ")

with open("pupu", "r") as file:
    prohibited = file.read().split(" ")

for zap in prohibited:
    while zap in x.lower():
        ct = len(zap)*'*'
        b = x.lower().index(zap)
        x = x.replace(x[b:b+len(zap)], ct)
print(x)
```
### Результат.
![Меню](https://github.com/Shtuchkina/Lerin-sklad/blob/%D0%A2%D0%B5%D0%BC%D0%B0_7/%D0%A2%D0%B5%D0%BC%D0%B0%207/Screenshot%202024-10-23%20013559.png?raw=true)

### Выводы
1. Применение `x.lower()` для сравнения и замены без учета регистра.
2. Использование `str.index()` для определения позиции слова в строке.
3. Использование `str.replace()` для замены части строки.



### Задание 5. Напишите программу, которая подсчиитывает количество символов в текстовом файле.
```python
file = open ('pupu.txt', 'r')
text = file.read()

words = text.split()
word_count = len(words)

print(f"Количество слов в тексте: {word_count}")
```
### Результат.
![Меню](https://github.com/Shtuchkina/Lerin-sklad/blob/%D0%A2%D0%B5%D0%BC%D0%B0_7/%D0%A2%D0%B5%D0%BC%D0%B0%207/Screenshot%202024-10-23%20014022.png?raw=true)

### Выводы
1. Чтение всего содержимого файла с помощью метода `read()`.
2. Разделение текста на слова с помощью метода `split()`.
3. Подсчет количества слов с помощью функции `len()`.



## Общие выводы по теме
- На основе всех представленных выше заданий можно сделать выводы о том, что работа с файлами в Python включает в себя основные операции чтения и записи данных, а также анализ текста. Используя `with`, можно безопасно открывать и закрывать файлы, избегая утечек ресурсов. При работе с большими файлами рекомендуется использовать методы чтения частичных данных для оптимизации производительности.
